/*******************************************************************************
 * Copyright 2017 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
if (window.Element && !Element.prototype.closest) {
    // eslint valid-jsdoc: "off"
    Element.prototype.closest =
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var el      = this;
            var i;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) {
                    // continue
                }
            } while ((i < 0) && (el = el.parentElement));
            return el;
        };
}

if (window.Element && !Element.prototype.matches) {
    Element.prototype.matches =
        Element.prototype.matchesSelector ||
        Element.prototype.mozMatchesSelector ||
        Element.prototype.msMatchesSelector ||
        Element.prototype.oMatchesSelector ||
        Element.prototype.webkitMatchesSelector ||
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var i       = matches.length;
            while (--i >= 0 && matches.item(i) !== this) {
                // continue
            }
            return i > -1;
        };
}

if (!Object.assign) {
    Object.assign = function(target, varArgs) { // .length of function is 2
        "use strict";
        if (target === null) {
            throw new TypeError("Cannot convert undefined or null to object");
        }

        var to = Object(target);

        for (var index = 1; index < arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource !== null) {
                for (var nextKey in nextSource) {
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    };
}

(function(arr) {
    "use strict";
    arr.forEach(function(item) {
        if (Object.prototype.hasOwnProperty.call(item, "remove")) {
            return;
        }
        Object.defineProperty(item, "remove", {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function remove() {
                this.parentNode.removeChild(this);
            }
        });
    });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

/*******************************************************************************
 * Copyright 2022 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function(document) {
    "use strict";

    window.CMP = window.CMP || {};
    window.CMP.utils = (function() {
        var NS = "cmp";

        /**
         * Reads options data from the Component wrapper element, defined via {@code data-cmp-*} data attributes
         *
         * @param {HTMLElement} element The component element to read options data from
         * @param {String} is The component identifier
         * @returns {String[]} The options read from the component data attributes
         */
        var readData = function(element, is) {
            var data = element.dataset;
            var options = [];
            var capitalized = is;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var reserved = ["is", "hook" + capitalized];

            for (var key in data) {
                if (Object.prototype.hasOwnProperty.call(data, key)) {
                    var value = data[key];

                    if (key.indexOf(NS) === 0) {
                        key = key.slice(NS.length);
                        key = key.charAt(0).toLowerCase() + key.substring(1);

                        if (reserved.indexOf(key) === -1) {
                            options[key] = value;
                        }
                    }
                }
            }
            return options;
        };

        /**
         * Set up the final properties of a component by evaluating the transform function or fall back to the default value on demand
         * @param {String[]} options the options to transform
         * @param {Object} properties object of properties of property functions
         * @returns {Object} transformed properties
         */
        var setupProperties = function(options, properties) {
            var transformedProperties = {};

            for (var key in properties) {
                if (Object.prototype.hasOwnProperty.call(properties, key)) {
                    var property = properties[key];
                    if (options && options[key] != null) {
                        if (property && typeof property.transform === "function") {
                            transformedProperties[key] = property.transform(options[key]);
                        } else {
                            transformedProperties[key] = options[key];
                        }
                    } else {
                        transformedProperties[key] = properties[key]["default"];
                    }
                }
            }
            return transformedProperties;
        };


        return {
            readData: readData,
            setupProperties: setupProperties
        };
    }());
}(window.document));

/*******************************************************************************
 * Copyright 2022 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function(document) {
    "use strict";

    window.CMP = window.CMP || {};
    window.CMP.image = window.CMP.image || {};
    window.CMP.image.dynamicMedia = (function() {
        var autoSmartCrops = {};
        var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";
        var SRC_URI_TEMPLATE_DPR_VAR = "{dpr}";
        var SRC_URI_DPR_OFF = "dpr=off";
        var SRC_URI_DPR_ON = "dpr=on,{dpr}";
        var dpr = window.devicePixelRatio || 1;
        var config = {
            minWidth: 20
        };

        /**
         * get auto smart crops from dm
         * @param {String} src the src uri
         * @returns {{}} the smart crop json object
         */
        var getAutoSmartCrops = function(src) {
            var request = new XMLHttpRequest();
            var url = src.split(SRC_URI_TEMPLATE_WIDTH_VAR)[0] + "?req=set,json";
            request.open("GET", url, false);
            request.onload = function() {
                if (request.status >= 200 && request.status < 400) {
                    // success status
                    var responseText = request.responseText;
                    var rePayload = new RegExp(/^(?:\/\*jsonp\*\/)?\s*([^()]+)\(([\s\S]+),\s*"[0-9]*"\);?$/gmi);
                    var rePayloadJSON = new RegExp(/^{[\s\S]*}$/gmi);
                    var resPayload = rePayload.exec(responseText);
                    var payload;
                    if (resPayload) {
                        var payloadStr = resPayload[2];
                        if (rePayloadJSON.test(payloadStr)) {
                            payload = JSON.parse(payloadStr);
                        }

                    }
                    // check "relation" - only in case of smartcrop preset
                    if (payload && payload.set.relation && payload.set.relation.length > 0) {
                        for (var i = 0; i < payload.set.relation.length; i++) {
                            autoSmartCrops[parseInt(payload.set.relation[i].userdata.SmartCropWidth)] =
                                ":" + payload.set.relation[i].userdata.SmartCropDef;
                        }
                    }
                } else {
                    // error status
                }
            };
            request.send();
            return autoSmartCrops;
        };

        /**
         * Build and return the srcset value based on the available auto smart crops
         * @param {String} src the src uri
         * @param {Object} smartCrops the smart crops object
         * @returns {String} the srcset
         */
        var getSrcSet = function(src, smartCrops) {
            var srcset;
            var keys = Object.keys(smartCrops);
            if (keys.length > 0) {
                srcset = [];
                for (var key in autoSmartCrops) {
                    srcset.push(src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, smartCrops[key]) + " " + key + "w");
                }
            }
            return  srcset.join(",");
        };

        /**
         * Get the optimal width based on the available sizes
         * @param {[Number]} sizes the available sizes
         * @param {Number} width the element width
         * @returns {String} the optimal width
         */
        function getOptimalWidth(sizes, width) {
            var len = sizes.length;
            var key = 0;

            while ((key < len - 1) && (sizes[key] < width)) {
                key++;
            }

            return sizes[key] !== undefined ? sizes[key].toString() : width;
        }

        /**
         * Get the width of an element or parent element if the width is smaller than the minimum width
         * @param {HTMLElement} component the image component
         * @param {HTMLElement | Node} parent the parent element
         * @returns {Number} the width of the element
         */
        var getWidth = function(component, parent) {
            var width = component.offsetWidth;
            while (width < config.minWidth && parent && !component._autoWidth) {
                width =  parent.offsetWidth;
                parent = parent.parentNode;
            }
            return width;
        };

        /**
         * Set the src and srcset attribute for a Dynamic Media Image which auto smart crops enabled.
         * @param {HTMLElement} component the image component
         * @param {{}} properties the component properties
         */
        var setDMAttributes = function(component, properties) {
            // for v3 we first have to turn the dpr on
            var src = properties.src.replace(SRC_URI_DPR_OFF, SRC_URI_DPR_ON);
            src = src.replace(SRC_URI_TEMPLATE_DPR_VAR, dpr);
            var smartCrops = {};
            var width;
            if (properties["smartcroprendition"] === "SmartCrop:Auto") {
                smartCrops = getAutoSmartCrops(src);
            }
            var hasWidths = (properties.widths && properties.widths.length > 0) || Object.keys(smartCrops).length > 0;
            if (hasWidths) {
                var image = component.querySelector("img");
                var elemWidth = getWidth(component, component.parentNode);
                if (properties["smartcroprendition"] === "SmartCrop:Auto") {
                    image.setAttribute("srcset", CMP.image.dynamicMedia.getSrcSet(src, smartCrops));
                    width = getOptimalWidth(Object.keys(smartCrops, elemWidth));
                    image.setAttribute("src", CMP.image.dynamicMedia.getSrc(src, smartCrops[width]));
                } else {
                    width = getOptimalWidth(properties.widths, elemWidth);
                    image.setAttribute("src", CMP.image.dynamicMedia.getSrc(src, width));
                }
            }
        };

        /**
         * Get the src attribute based on the optimal width
         * @param {String} src the src uri
         * @param {String} width the element width
         * @returns {String} the final src attribute
         */
        var getSrc = function(src, width) {
            if (src.indexOf(SRC_URI_TEMPLATE_WIDTH_VAR) > -1) {
                src = src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, width);
            }
            return src;
        };


        return {
            getAutoSmartCrops: getAutoSmartCrops,
            getSrcSet: getSrcSet,
            getSrc: getSrc,
            setDMAttributes: setDMAttributes,
            getWidth: getWidth
        };
    }());
    document.dispatchEvent(new CustomEvent("core.wcm.components.commons.site.image.dynamic-media.loaded"));
}(window.document));

/*******************************************************************************
 * Copyright 2016 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "image";

    var EMPTY_PIXEL = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
    var LAZY_THRESHOLD_DEFAULT = 0;
    var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";
    var SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY = "width={width}";
    var SRC_URI_TEMPLATE_DPR_VAR = "{dpr}";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        image: '[data-cmp-hook-image="image"]',
        map: '[data-cmp-hook-image="map"]',
        area: '[data-cmp-hook-image="area"]'
    };

    var lazyLoader = {
        "cssClass": "cmp-image__image--is-loading",
        "style": {
            "height": 0,
            "padding-bottom": "" // will be replaced with % ratio
        }
    };

    var properties = {
        /**
         * An array of alternative image widths (in pixels).
         * Used to replace a {.width} variable in the src property with an optimal width if a URI template is provided.
         *
         * @memberof Image
         * @type {Number[]}
         * @default []
         */
        "widths": {
            "default": [],
            "transform": function(value) {
                var widths = [];
                value.split(",").forEach(function(item) {
                    item = parseFloat(item);
                    if (!isNaN(item)) {
                        widths.push(item);
                    }
                });
                return widths;
            }
        },
        /**
         * Indicates whether the image should be rendered lazily.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "lazy": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * Indicates image is DynamicMedia image.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "dmimage": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * The lazy threshold.
         * This is the number of pixels, in advance of becoming visible, when an lazy-loading image should begin
         * to load.
         *
         * @memberof Image
         * @type {Number}
         * @default 0
         */
        "lazythreshold": {
            "default": 0,
            "transform": function(value) {
                var val =  parseInt(value);
                if (isNaN(val)) {
                    return LAZY_THRESHOLD_DEFAULT;
                }
                return val;
            }
        },
        /**
         * The image source.
         *
         * Can be a simple image source, or a URI template representation that
         * can be variable expanded - useful for building an image configuration with an alternative width.
         * e.g. '/path/image.coreimg{.width}.jpeg/1506620954214.jpeg'
         *
         * @memberof Image
         * @type {String}
         */
        "src": {
            "transform": function(value) {
                return decodeURIComponent(value);
            }
        }
    };

    var devicePixelRatio = window.devicePixelRatio || 1;

    function Image(config) {
        var that = this;

        var smartCrops = {};

        var useAssetDelivery = false;
        var srcUriTemplateWidthVar = SRC_URI_TEMPLATE_WIDTH_VAR;

        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            // check if asset delivery is used
            if (config.options.src && config.options.src.indexOf(SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY) >= 0) {
                useAssetDelivery = true;
                srcUriTemplateWidthVar = SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY;
            }

            that._properties = CMP.utils.setupProperties(config.options, properties);
            cacheElements(config.element);
            // check image is DM asset; if true try to make req=set
            if (config.options.src && Object.prototype.hasOwnProperty.call(config.options, "dmimage") && (config.options["smartcroprendition"] === "SmartCrop:Auto")) {
                smartCrops = CMP.image.dynamicMedia.getAutoSmartCrops(config.options.src);
            }

            if (!that._elements.noscript) {
                return;
            }

            that._elements.container = that._elements.link ? that._elements.link : that._elements.self;

            unwrapNoScript();

            if (that._properties.lazy) {
                addLazyLoader();
            }

            if (that._elements.map) {
                that._elements.image.addEventListener("load", onLoad);
            }

            window.addEventListener("resize", onWindowResize);
            ["focus", "click", "load", "transitionend", "animationend", "scroll"].forEach(function(name) {
                document.addEventListener(name, that.update);
            });

            that._elements.image.addEventListener("cmp-image-redraw", that.update);

            that._interSectionObserver = new IntersectionObserver(function(entries, interSectionObserver) {
                entries.forEach(function(entry) {
                    if (entry.intersectionRatio > 0) {
                        that.update();
                    }
                });
            });
            that._interSectionObserver.observe(that._elements.self);

            that.update();
        }

        function loadImage() {
            var hasWidths = (that._properties.widths && that._properties.widths.length > 0) || Object.keys(smartCrops).length > 0;
            var replacement;
            if (Object.keys(smartCrops).length > 0) {
                var optimalWidth = getOptimalWidth(Object.keys(smartCrops), false);
                replacement = smartCrops[optimalWidth];
            } else {
                replacement = hasWidths ? (that._properties.dmimage ? "" : ".") + getOptimalWidth(that._properties.widths, true) : "";
            }
            if (useAssetDelivery) {
                replacement = replacement !== "" ? ("width=" + replacement.substring(1)) : "";
            }
            var url = that._properties.src.replace(srcUriTemplateWidthVar, replacement);
            url = url.replace(SRC_URI_TEMPLATE_DPR_VAR, devicePixelRatio);

            var imgSrcAttribute = that._elements.image.getAttribute("src");

            if (url !== imgSrcAttribute) {
                if (imgSrcAttribute === null || imgSrcAttribute === EMPTY_PIXEL) {
                    that._elements.image.setAttribute("src", url);
                } else {
                    var urlTemplateParts = that._properties.src.split(srcUriTemplateWidthVar);
                    // check if image src was dynamically swapped meanwhile (e.g. by Target)
                    var isImageRefSame = imgSrcAttribute.startsWith(urlTemplateParts[0]);
                    if (isImageRefSame && urlTemplateParts.length > 1) {
                        isImageRefSame = imgSrcAttribute.endsWith(urlTemplateParts[urlTemplateParts.length - 1]);
                    }
                    if (isImageRefSame) {
                        that._elements.image.setAttribute("src", url);
                        if (!hasWidths) {
                            window.removeEventListener("scroll", that.update);
                        }
                    }
                }
            }
            if (that._lazyLoaderShowing) {
                that._elements.image.addEventListener("load", removeLazyLoader);
            }
            that._interSectionObserver.unobserve(that._elements.self);
        }

        function getOptimalWidth(widths, useDevicePixelRatio) {
            var container = that._elements.self;
            var containerWidth = container.clientWidth;
            while (containerWidth === 0 && container.parentNode) {
                container = container.parentNode;
                containerWidth = container.clientWidth;
            }

            var dpr = useDevicePixelRatio ? devicePixelRatio : 1;
            var optimalWidth = containerWidth * dpr;
            var len = widths.length;
            var key = 0;

            while ((key < len - 1) && (widths[key] < optimalWidth)) {
                key++;
            }

            return widths[key].toString();
        }

        function addLazyLoader() {
            var width = that._elements.image.getAttribute("width");
            var height = that._elements.image.getAttribute("height");

            if (width && height) {
                var ratio = (height / width) * 100;
                var styles = lazyLoader.style;

                styles["padding-bottom"] = ratio + "%";

                for (var s in styles) {
                    if (Object.prototype.hasOwnProperty.call(styles, s)) {
                        that._elements.image.style[s] = styles[s];
                    }
                }
            }
            that._elements.image.setAttribute("src", EMPTY_PIXEL);
            that._elements.image.classList.add(lazyLoader.cssClass);
            that._lazyLoaderShowing = true;
        }

        function unwrapNoScript() {
            var markup = decodeNoscript(that._elements.noscript.textContent.trim());
            var parser = new DOMParser();

            // temporary document avoids requesting the image before removing its src
            var temporaryDocument = parser.parseFromString(markup, "text/html");
            var imageElement = temporaryDocument.querySelector(selectors.image);
            imageElement.removeAttribute("src");
            that._elements.container.insertBefore(imageElement, that._elements.noscript);

            var mapElement = temporaryDocument.querySelector(selectors.map);
            if (mapElement) {
                that._elements.container.insertBefore(mapElement, that._elements.noscript);
            }

            that._elements.noscript.parentNode.removeChild(that._elements.noscript);
            if (that._elements.container.matches(selectors.image)) {
                that._elements.image = that._elements.container;
            } else {
                that._elements.image = that._elements.container.querySelector(selectors.image);
            }

            that._elements.map = that._elements.container.querySelector(selectors.map);
            that._elements.areas = that._elements.container.querySelectorAll(selectors.area);
        }

        function removeLazyLoader() {
            that._elements.image.classList.remove(lazyLoader.cssClass);
            for (var property in lazyLoader.style) {
                if (Object.prototype.hasOwnProperty.call(lazyLoader.style, property)) {
                    that._elements.image.style[property] = "";
                }
            }
            that._elements.image.removeEventListener("load", removeLazyLoader);
            that._lazyLoaderShowing = false;
        }

        function isLazyVisible() {
            if (that._elements.container.offsetParent === null) {
                return false;
            }

            var wt = window.pageYOffset;
            var wb = wt + document.documentElement.clientHeight;
            var et = that._elements.container.getBoundingClientRect().top + wt;
            var eb = et + that._elements.container.clientHeight;

            return eb >= wt - that._properties.lazythreshold && et <= wb + that._properties.lazythreshold;
        }

        function resizeAreas() {
            if (that._elements.areas && that._elements.areas.length > 0) {
                for (var i = 0; i < that._elements.areas.length; i++) {
                    var width = that._elements.image.width;
                    var height = that._elements.image.height;

                    if (width && height) {
                        var relcoords = that._elements.areas[i].dataset.cmpRelcoords;
                        if (relcoords) {
                            var relativeCoordinates = relcoords.split(",");
                            var coordinates = new Array(relativeCoordinates.length);

                            for (var j = 0; j < coordinates.length; j++) {
                                if (j % 2 === 0) {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * width);
                                } else {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * height);
                                }
                            }

                            that._elements.areas[i].coords = coordinates;
                        }
                    }
                }
            }
        }

        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                that._elements[key] = hook;
            }
        }

        function onWindowResize() {
            that.update();
            resizeAreas();
        }

        function onLoad() {
            resizeAreas();
        }

        that.update = function() {
            if (that._properties.lazy) {
                if (isLazyVisible()) {
                    loadImage();
                }
            } else {
                loadImage();
            }
        };

        if (config && config.element) {
            init(config);
        }
    }

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Image({ element: elements[i], options: CMP.utils.readData(elements[i], IS) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body             = document.querySelector("body");
        var observer         = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Image({ element: element, options: CMP.utils.readData(element, IS) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    var documentReady = document.readyState !== "loading" ? Promise.resolve() : new Promise(function(resolve) {
        document.addEventListener("DOMContentLoaded", resolve);
    });

    Promise.all([documentReady]).then(onDocumentReady);
    /*
        on drag & drop of the component into a parsys, noscript's content will be escaped multiple times by the editor which creates
        the DOM for editing; the HTML parser cannot be used here due to the multiple escaping
     */
    function decodeNoscript(text) {
        text = text.replace(/&(amp;)*lt;/g, "<");
        text = text.replace(/&(amp;)*gt;/g, ">");
        return text;
    }

})();


/*******************************************************************************
 * Copyright 2017 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "search";

    var DELAY = 300; // time before fetching new results when the user is typing a search string
    var LOADING_DISPLAY_DELAY = 300; // minimum time during which the loading indicator is displayed
    var PARAM_RESULTS_OFFSET = "resultsOffset";

    var keyCodes = {
        TAB: 9,
        ENTER: 13,
        ESCAPE: 27,
        ARROW_UP: 38,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        item: {
            self: "[data-" + NS + "-hook-" + IS + '="item"]',
            title: "[data-" + NS + "-hook-" + IS + '="itemTitle"]',
            focused: "." + NS + "-search__item--is-focused"
        }
    };

    var properties = {
        /**
         * The minimum required length of the search term before results are fetched.
         *
         * @memberof Search
         * @type {Number}
         * @default 3
         */
        minLength: {
            "default": 3,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        },
        /**
         * The maximal number of results fetched by a search request.
         *
         * @memberof Search
         * @type {Number}
         * @default 10
         */
        resultsSize: {
            "default": 10,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        }
    };

    var idCount = 0;

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (Object.prototype.hasOwnProperty.call(data, key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function toggleShow(element, show) {
        if (element) {
            if (show !== false) {
                element.style.display = "block";
                element.setAttribute("aria-hidden", false);
            } else {
                element.style.display = "none";
                element.setAttribute("aria-hidden", true);
            }
        }
    }

    function serialize(form) {
        var query = [];
        if (form && form.elements) {
            for (var i = 0; i < form.elements.length; i++) {
                var node = form.elements[i];
                if (!node.disabled && node.name) {
                    var param = [node.name, encodeURIComponent(node.value)];
                    query.push(param.join("="));
                }
            }
        }
        return query.join("&");
    }

    function mark(node, regex) {
        if (!node || !regex) {
            return;
        }

        // text nodes
        if (node.nodeType === 3) {
            var nodeValue = node.nodeValue;
            var match = regex.exec(nodeValue);

            if (nodeValue && match) {
                var element = document.createElement("mark");
                element.className = NS + "-search__item-mark";
                element.appendChild(document.createTextNode(match[0]));

                var after = node.splitText(match.index);
                after.nodeValue = after.nodeValue.substring(match[0].length);
                node.parentNode.insertBefore(element, after);
            }
        } else if (node.hasChildNodes()) {
            for (var i = 0; i < node.childNodes.length; i++) {
                // recurse
                mark(node.childNodes[i], regex);
            }
        }
    }

    function Search(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._action = this._elements.form.getAttribute("action");
        this._resultsOffset = 0;
        this._hasMoreResults = true;

        this._elements.input.addEventListener("input", this._onInput.bind(this));
        this._elements.input.addEventListener("focus", this._onInput.bind(this));
        this._elements.input.addEventListener("keydown", this._onKeydown.bind(this));
        this._elements.clear.addEventListener("click", this._onClearClick.bind(this));
        document.addEventListener("click", this._onDocumentClick.bind(this));
        this._elements.results.addEventListener("scroll", this._onScroll.bind(this));

        this._makeAccessible();
    }

    Search.prototype._displayResults = function() {
        if (this._elements.input.value.length === 0) {
            toggleShow(this._elements.clear, false);
            this._cancelResults();
        } else if (this._elements.input.value.length < this._properties.minLength) {
            toggleShow(this._elements.clear, true);
        } else {
            this._updateResults();
            toggleShow(this._elements.clear, true);
        }
    };

    Search.prototype._onScroll = function(event) {
        // fetch new results when the results to be scrolled down are less than the visible results
        if (this._elements.results.scrollTop + 2 * this._elements.results.clientHeight >= this._elements.results.scrollHeight) {
            this._resultsOffset += this._properties.resultsSize;
            this._displayResults();
        }
    };

    Search.prototype._onInput = function(event) {
        var self = this;
        self._cancelResults();
        // start searching when the search term reaches the minimum length
        this._timeout = setTimeout(function() {
            self._displayResults();
        }, DELAY);
    };

    Search.prototype._onKeydown = function(event) {
        var self = this;

        switch (event.keyCode) {
            case keyCodes.TAB:
                if (self._resultsOpen()) {
                    toggleShow(self._elements.results, false);
                    self._elements.input.setAttribute("aria-expanded", "false");
                }
                break;
            case keyCodes.ENTER:
                event.preventDefault();
                if (self._resultsOpen()) {
                    var focused = self._elements.results.querySelector(selectors.item.focused);
                    if (focused) {
                        focused.click();
                    }
                }
                break;
            case keyCodes.ESCAPE:
                self._cancelResults();
                break;
            case keyCodes.ARROW_UP:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus(true);
                }
                break;
            case keyCodes.ARROW_DOWN:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus();
                } else {
                    // test the input and if necessary fetch and display the results
                    self._onInput();
                }
                break;
            default:
                return;
        }
    };

    Search.prototype._onClearClick = function(event) {
        event.preventDefault();
        this._elements.input.value = "";
        toggleShow(this._elements.clear, false);
        toggleShow(this._elements.results, false);
        this._elements.input.setAttribute("aria-expanded", "false");
    };

    Search.prototype._onDocumentClick = function(event) {
        var inputContainsTarget =  this._elements.input.contains(event.target);
        var resultsContainTarget = this._elements.results.contains(event.target);

        if (!(inputContainsTarget || resultsContainTarget)) {
            toggleShow(this._elements.results, false);
            this._elements.input.setAttribute("aria-expanded", "false");
        }
    };

    Search.prototype._resultsOpen = function() {
        return this._elements.results.style.display !== "none";
    };

    Search.prototype._makeAccessible = function() {
        var id = NS + "-search-results-" + idCount;
        this._elements.input.setAttribute("aria-owns", id);
        this._elements.results.id = id;
        idCount++;
    };

    Search.prototype._generateItems = function(data, results) {
        var self = this;

        data.forEach(function(item) {
            var el = document.createElement("span");
            el.innerHTML = self._elements.itemTemplate.innerHTML;
            el.querySelectorAll(selectors.item.title)[0].appendChild(document.createTextNode(item.title));
            el.querySelectorAll(selectors.item.self)[0].setAttribute("href", item.url);
            results.innerHTML += el.innerHTML;
        });
    };

    Search.prototype._markResults = function() {
        var nodeList = this._elements.results.querySelectorAll(selectors.item.self);
        var escapedTerm = this._elements.input.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        var regex = new RegExp("(" + escapedTerm + ")", "gi");

        for (var i = this._resultsOffset - 1; i < nodeList.length; ++i) {
            var result = nodeList[i];
            mark(result, regex);
        }
    };

    Search.prototype._stepResultFocus = function(reverse) {
        var results = this._elements.results.querySelectorAll(selectors.item.self);
        var focused = this._elements.results.querySelector(selectors.item.focused);
        var newFocused;
        var index = Array.prototype.indexOf.call(results, focused);
        var focusedCssClass = NS + "-search__item--is-focused";

        if (results.length > 0) {

            if (!reverse) {
                // highlight the next result
                if (index < 0) {
                    results[0].classList.add(focusedCssClass);
                    results[0].setAttribute("aria-selected", "true");
                } else if (index + 1 < results.length) {
                    results[index].classList.remove(focusedCssClass);
                    results[index].setAttribute("aria-selected", "false");
                    results[index + 1].classList.add(focusedCssClass);
                    results[index + 1].setAttribute("aria-selected", "true");
                }

                // if the last visible result is partially hidden, scroll up until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var bottomHiddenHeight = newFocused.offsetTop + newFocused.offsetHeight - this._elements.results.scrollTop - this._elements.results.clientHeight;
                    if (bottomHiddenHeight > 0) {
                        this._elements.results.scrollTop += bottomHiddenHeight;
                    } else {
                        this._onScroll();
                    }
                }

            } else {
                // highlight the previous result
                if (index >= 1) {
                    results[index].classList.remove(focusedCssClass);
                    results[index].setAttribute("aria-selected", "false");
                    results[index - 1].classList.add(focusedCssClass);
                    results[index - 1].setAttribute("aria-selected", "true");
                }

                // if the first visible result is partially hidden, scroll down until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var topHiddenHeight = this._elements.results.scrollTop - newFocused.offsetTop;
                    if (topHiddenHeight > 0) {
                        this._elements.results.scrollTop -= topHiddenHeight;
                    }
                }
            }
        }
    };

    Search.prototype._updateResults = function() {
        var self = this;
        if (self._hasMoreResults) {
            var request = new XMLHttpRequest();
            var url = self._action + "?" + serialize(self._elements.form) + "&" + PARAM_RESULTS_OFFSET + "=" + self._resultsOffset;

            request.open("GET", url, true);
            request.onload = function() {
                // when the results are loaded: hide the loading indicator and display the search icon after a minimum period
                setTimeout(function() {
                    toggleShow(self._elements.loadingIndicator, false);
                    toggleShow(self._elements.icon, true);
                }, LOADING_DISPLAY_DELAY);
                if (request.status >= 200 && request.status < 400) {
                    // success status
                    var data = JSON.parse(request.responseText);
                    if (data.length > 0) {
                        self._generateItems(data, self._elements.results);
                        self._markResults();
                        toggleShow(self._elements.results, true);
                        self._elements.input.setAttribute("aria-expanded", "true");
                    } else {
                        self._hasMoreResults = false;
                    }
                    // the total number of results is not a multiple of the fetched results:
                    // -> we reached the end of the query
                    if (self._elements.results.querySelectorAll(selectors.item.self).length % self._properties.resultsSize > 0) {
                        self._hasMoreResults = false;
                    }
                } else {
                    // error status
                }
            };
            // when the results are loading: display the loading indicator and hide the search icon
            toggleShow(self._elements.loadingIndicator, true);
            toggleShow(self._elements.icon, false);
            request.send();
        }
    };

    Search.prototype._cancelResults = function() {
        clearTimeout(this._timeout);
        this._elements.results.scrollTop = 0;
        this._resultsOffset = 0;
        this._hasMoreResults = true;
        this._elements.results.innerHTML = "";
        this._elements.input.setAttribute("aria-expanded", "false");
    };

    Search.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    Search.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (Object.prototype.hasOwnProperty.call(properties, key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Search({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Search({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();


/*******************************************************************************
 * Copyright 2016 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "formText";
    var IS_DASH = "form-text";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var properties = {
        /**
         * A validation message to display if there is a type mismatch between the user input and expected input.
         *
         * @type {String}
         */
        constraintMessage: "",
        /**
         * A validation message to display if no input is supplied, but input is expected for the field.
         *
         * @type {String}
         */
        requiredMessage: ""
    };

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (Object.prototype.hasOwnProperty.call(data, key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function FormText(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._elements.input.addEventListener("invalid", this._onInvalid.bind(this));
        this._elements.input.addEventListener("input", this._onInput.bind(this));
    }

    FormText.prototype._onInvalid = function(event) {
        event.target.setCustomValidity("");
        if (event.target.validity.typeMismatch) {
            if (this._properties.constraintMessage) {
                event.target.setCustomValidity(this._properties.constraintMessage);
            }
        } else if (event.target.validity.valueMissing) {
            if (this._properties.requiredMessage) {
                event.target.setCustomValidity(this._properties.requiredMessage);
            }
        }
    };

    FormText.prototype._onInput = function(event) {
        event.target.setCustomValidity("");
    };

    FormText.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS_DASH + "]");
        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    FormText.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (Object.prototype.hasOwnProperty.call(properties, key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new FormText({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new FormText({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();


/*! For license information please see basePage.js.LICENSE.txt */
!function(){var e,t={750:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});const a="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function s(e,t){const n=new CustomEvent("modalclose");return t=Object.assign({closeTriggerElems:".modal_close, .content-modal",modalBody:".content-modal > section"},t),document.querySelector(t.modalBody)?.addEventListener("click",(function(e){e.stopPropagation()})),e.forEach((function(e){const s=e.getAttribute("href");let i,o=!1;e.addEventListener("click",(function(e){i=document.activeElement;const r=document.querySelector(s);function l(e){!o||e.code&&"Escape"!==e.code||(r?.classList.add("animateOut"),setTimeout((function(){r?.classList.remove("animateOut","open"),r?.setAttribute("aria-hidden","true")}),1e3),o=!1,i.focus(),window.dispatchEvent(n))}r?.classList.add("open"),r?.focus(),r?.setAttribute("aria-hidden","false"),o=!0;document.querySelectorAll(t.closeTriggerElems).forEach((e=>{e.addEventListener("click",l)})),document.addEventListener("keyup",l),e.preventDefault(),r?.addEventListener("keydown",(function(e){!function(e,t,n=a){if("Tab"===t.code){const a=e.querySelectorAll("*");let s=Array.from(a).filter((e=>e.matches(n)));const i=document.querySelector(":focus")||document.activeElement,o=s.length;if(null==i)return;const r=s.indexOf(i);t.shiftKey?0===r&&(s[o-1]?.focus(),t.preventDefault()):r===o-1&&(s[0]?.focus(),t.preventDefault())}}(this,e)}))}))}))}const i={exitSiteModalConfig:Object.create(null),addAnchorDataToModal(e){const t=e.getAttribute("data-href"),n=e.getAttribute("data-title"),a=e.getAttribute("title"),s=e.textContent,i=document.querySelector(`#${this.exitSiteModalConfig.modalId} .${this.exitSiteModalConfig.modalContinueButtonClass}`),o=i?.querySelector(".sr-only");i?.setAttribute("href",t),o?.remove(),i?.insertAdjacentHTML("beforeend",`<span class="sr-only"> to ${s}</span>`);const r=document.querySelector(`#${this.exitSiteModalConfig.modalId} .${this.exitSiteModalConfig.modalOffsiteLinkTitleClass}`);null!=r&&(r.textContent=`${n||a||s||t} [Opens in a new window]`)},isExcludedLink(e,t){if(null!=e.closest(".exitSitePopUp"))return!0;let n=this.exitSiteModalConfig.excludedLinksList;if(n){let e=n.split(",");for(const n of e)if(t.includes(n))return!0}},triggerChildLinks(e){const t=e.querySelector("a[data-href]");"A"===e.nodeName||null===t||t.click()},configureElementForModal(e,t){const n=this;let a=t?e.getAttribute("onclick"):e.href;if(null!=a&&(a=a.split("?")[0],!this.isExcludedLink(e,a))){if(t)return e.removeAttribute("onclick"),void e.classList.add(`${this.exitSiteModalConfig.modalTriggerClass}`);if(!a.includes(location.hostname)){e.addEventListener("click",(function(){return n.addAnchorDataToModal(this),!1}));const t=e.getAttribute("href");if(null==t)return;e.setAttribute("data-href",t),e.setAttribute("href",`#${this.exitSiteModalConfig.modalId}`),e.setAttribute("data-modal","true"),e.classList.add(`${this.exitSiteModalConfig.modalTriggerClass}`)}}},findOffsiteLinks(e=this.exitSiteModalConfig.offsiteElemsSelector){document.querySelectorAll(e).forEach((e=>{const t=e.getAttribute("onclick");t&&t.includes("location.href='http")?this.configureElementForModal(e,!0):this.configureElementForModal(e,!1)}))},init(e){const t=this,n={offsiteElemsSelector:'a[href^=http]:not(.noBump), [onclick*="http"]',modalTriggerClass:"addressClick",modalId:"offSite",modalOffsiteLinkTitleClass:"externalURL_text",modalContinueButtonClass:"externalURL",excludedLinksList:document.getElementById("excludesList")?.dataset.excludes};this.exitSiteModalConfig=Object.assign(n,e),this.findOffsiteLinks(this.exitSiteModalConfig.offsiteElemsSelector),document.querySelectorAll(`.${this.exitSiteModalConfig.modalTriggerClass}`).forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),t.triggerChildLinks(this)}),!1)}));s(document.querySelectorAll("a[data-modal*=true"),{closeTriggerElems:".modal_close, .offSiteBtns .externalURL, .content-modal"})}}},397:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});n(932);function a(){const e={$toggleLabel:$(".mobile-nav-hamburger-btn"),menuBtnHTML:'<button for="sidebartoggler" aria-label="Toggle Main Menu" class="global-header__mobile-nav-hamburger-btn" aria-expanded="false">\n                    <i class="fa fa-bars global-header__mobile-nav-hamburger-icon" aria-hidden="true"></i>\n                  </button>',$sidebarTogglerCheckbox:$("#sidebartoggler"),$navWrap:$(".global-header__nav-wrap"),$html:$("html"),classNavOpen:"nav-open",classOpenMenuIcon:"fa-bars",classCloseMenuIcon:"fa-times"};function t(){$(".global-header__mobile-nav-hamburger-btn").attr("aria-expanded","false").children("i").removeClass(e.classCloseMenuIcon).addClass(e.classOpenMenuIcon),e.$navWrap.attr("aria-hidden","true").attr("aria-expanded","false"),e.$html.removeClass(e.classNavOpen)}function n(){$(".global-header__mobile-nav-hamburger-btn").attr("aria-expanded","true").children("i").removeClass(e.classOpenMenuIcon).addClass(e.classCloseMenuIcon),e.$navWrap.attr("aria-hidden","false").attr("aria-expanded","true"),e.$html.addClass(e.classNavOpen)}function a(n){const a=n.find("select, input, textarea, button, a").filter(":visible"),s=$(".global-header__mobile-nav-hamburger-btn"),i=a.last();i.on("keydown",(function(e){9!==e.which||e.shiftKey||(e.preventDefault(),s.focus())})),s.on("keydown",(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),i.focus())})),$(".global-header__mobile-nav-hamburger-btn").add(e.$navWrap).on("keydown",(function(n){27===n.keyCode&&(e.$sidebarTogglerCheckbox.prop("checked",!1),t(),s.focus())}))}e.$toggleLabel.replaceWith(e.menuBtnHTML),$(window).on("load",(function(){const t=$(window).width()<780,s=e.$sidebarTogglerCheckbox.prop("checked");var i,o,r;t&&s?(n(),a(e.$navWrap),$(".global-header__mobile-nav-hamburger-btn").focus()):t&&!s?(i=e.$navWrap,o=!0,r=!1,i.attr("aria-hidden",o).attr("aria-expanded",r)):$(window).width()>=780&&e.$navWrap.removeAttr("aria-hidden").removeAttr("aria-expanded")})),$(".global-header__mobile-nav-hamburger-btn").on("click",(function(){e.$sidebarTogglerCheckbox.prop("checked",!e.$sidebarTogglerCheckbox.prop("checked")),e.$sidebarTogglerCheckbox.prop("checked")?(n(),a(e.$navWrap)):t()}))}function s(){const e={bodyIsNotResponsive:!$("body").is(".responsive"),$auxHeader:$(".global-header__aux-header"),$isNFFG:$(".global-header__nffg"),$nfcuLogo:$(".global-header__nfcu-logo"),$auxNav:$(".global-header__aux-nav"),$navWrap:$(".global-header__nav-wrap"),mainNavWrap:".global-header__main-nav-wrap",$mobileSignInBtn:$(".global-header__mobile-signin-btn"),$searchFormContainer:$(".header-search"),$sidebarTogglerCheckbox:$("#sidebartoggler"),$html:$("html"),$body:$("body"),$headerWrap:".global-header__header-wrap",navWrap:".global-header__nav-wrap",classCloseMenuIcon:"fa-times",classOpenMenuIcon:"fa-bars",classNavOpen:"nav-open"};e.bodyIsNotResponsive||$(window).width()>=780?(e.$sidebarTogglerCheckbox.prop("checked",!1),e.$navWrap.removeAttr("aria-hidden").removeAttr("aria-expanded"),e.$mobileSignInBtn.attr("aria-hidden","true"),$(".global-header__mobile-nav-hamburger-btn").attr("aria-expanded","false").children("i").removeClass(e.classCloseMenuIcon).addClass(e.classOpenMenuIcon),e.$html.removeClass(e.classNavOpen),e.$searchFormContainer.insertAfter(e.$headerWrap),e.$body.removeClass("init"),$(".global-header__nffg").length?(e.$auxHeader.append(e.$nfcuLogo),e.$auxHeader.append(e.$auxNav)):e.$auxNav.insertBefore(e.navWrap)):(!function(){const e=$(".global-header .header-search"),t=$(".search-toggle");e.removeAttr("style"),t.html('<span class="sr-only">Search</span><i class="fa fa-search" aria-hidden="true"></i>').attr("aria-expanded","false").attr("aria-label","Expand Search Field")}(),e.$searchFormContainer.insertBefore(e.mainNavWrap),e.$auxNav.insertAfter(e.mainNavWrap),e.$nfcuLogo.insertAfter(e.$auxNav),e.$navWrap.attr("aria-hidden","true").attr("aria-expanded","false"),e.$mobileSignInBtn.attr("aria-hidden","false"))}function i(){const e={browserIsWindows:-1!==navigator.appVersion.indexOf("Win"),bodyIsNotResponsive:!$("body").is(".responsive"),$lastBtn:$(".global-header__main-nav li:last-child > button"),nextSibling:"div.global-header__sub-nav"};function t(t,n){e.$lastBtn.next(e.nextSibling).attr("aria-hidden",t).attr("aria-expanded",n)}function n(t){"collapse"===t?e.$lastBtn.removeClass("open").attr("aria-expanded","false"):"expand"===t&&e.$lastBtn.addClass("open").attr("aria-expanded","true")}e.browserIsWindows?e.bodyIsNotResponsive||$(window).width()>762?(n("collapse"),t("true","false")):(n("expand"),t("false","true")):e.bodyIsNotResponsive||$(window).width()>779?(n("collapse"),t("true","false")):(n("expand"),t("false","true"))}const o={setEventHandlers(){let e=$(window).width();$(window).resize((function(){e!==$(window).width()&&(s(),i(),e=$(window).width())})),$(".global-header__nffg .global-header__main-nav-link").on("keydown",(function(e){13===e.keyCode&&this.click()}))},init(){$(".global-header").length&&($(".global-header__main-nav-wrap").accessibleMegaMenu({uuidPrefix:"accessible-megamenu",menuClass:"global-header__main-nav",topNavItemClass:"global-header__main-nav-item",panelClass:"global-header__sub-nav",panelGroupClass:"global-header__sub-nav-group",hoverClass:"hover",focusClass:"focus",openClass:"open"}),s(),i(),a(),function(){const e={$mainContent:$("#main-content")};$(".global-header__mobile-nav-hamburger-btn").on("keydown",(function(t){const n=$(".nav-open");9!==t.keyCode||n.length||t.shiftKey||e.$mainContent.focus()}))}(),function(){const e={$tabbable:$("#main-content").find("select, input, textarea, button, a").filter(":visible"),$hamburger:$(".global-header__mobile-nav-hamburger-btn")},t=e.$tabbable[0];$(t).on("keydown",(function(t){const n=$(".nav-open"),a=$(window).width()<780;9===t.keyCode&&t.shiftKey&&!n.length&&a&&(t.preventDefault(),e.$hamburger.focus())}))}(),this.setEventHandlers())}}},771:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});class a{name="image";init(){function e(){let e,t;$(".object-fit-container").each((function(){e=$(this),t=e.find("img").prop("src"),t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")}))}window.Modernizr.objectfit||(e(),$(".lazyload").on("load",(function(){e()})))}}},899:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var a=n(856),s=n.n(a);class i{init(){if(!("$CQ"in self)){const e=document.createElement("style");e.id="antiClickjackStyle";const t=document.createTextNode("body{display:none !important;}");if(document.head.appendChild(e),e.appendChild(t),self===top){const t=document.getElementById(e.id);t.parentNode.removeChild(t)}else top.location.href=s().sanitize(self.location.href)}}}},932:function(){!function(e,t,n){"use strict";var a,s,i,o,r,l,c,u,d,f,h,p,m,g,b,v,C,x,y,$,w="accessibleMegaMenu",k={uuidPrefix:"accessible-megamenu",menuClass:"accessible-megamenu",topNavItemClass:"accessible-megamenu-top-nav-item",panelClass:"accessible-megamenu-panel",panelGroupClass:"accessible-megamenu-panel-group",hoverClass:"hover",focusClass:"focus",openClass:"open",toggleButtonClass:"accessible-megamenu-toggle",openDelay:0,closeDelay:250,openOnMouseover:!1},_={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,keyMap:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",190:"."}},E=t.clearTimeout,S=t.setTimeout,T=t.opera&&"[object Opera]"===t.opera.toString();function M(t,n){this.element=t,this.settings=e.extend({},k,n),this._defaults=k,this._name=w,this.mouseTimeoutID=null,this.focusTimeoutID=null,this.mouseFocused=!1,this.justFocused=!1,this.init()}function D(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}function A(t,n){var a,s,i,o=t.nodeName.toLowerCase();return"area"===o?(s=(a=t.parentNode).name,!(!t.href||!s||"map"!==a.nodeName.toLowerCase())&&(!!(i=e("img[usemap=#"+s+"]")[0])&&D(i))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&D(t)}M.prototype=(x=0,y="",$="ontouchstart"in t||t.navigator.msMaxTouchPoints,a=function(t){return e(t).closest(":data(plugin_"+w+")").data("plugin_"+w)},s=function(t){t=e(t);var n=this.settings;t.attr("id")||t.attr("id",n.uuidPrefix+"-"+(new Date).getTime()+"-"+ ++x)},i=function(t,a){var s,i=e(t.target),o=this,r=this.settings,l=this.menu,c=i.closest("."+r.topNavItemClass),u=i.hasClass(r.panelClass)?i:i.closest("."+r.panelClass);if(b.call(this,!0),a)if((c=l.find("."+r.topNavItemClass+" ."+r.openClass+":first").closest("."+r.topNavItemClass)).is(t.relatedTarget)||c.has(t.relatedTarget).length>0)0===c.length&&l.find("[aria-expanded=true]").attr("aria-expanded","false").removeClass(r.openClass).filter("."+r.panelClass).attr("aria-hidden","true");else{if(("mouseout"===t.type||"focusout"===t.type)&&c.has(n.activeElement).length>0)return;c.find("[aria-expanded]").attr("aria-expanded","false").removeClass(r.openClass).filter("."+r.panelClass).attr("aria-hidden","true"),("keydown"===t.type&&t.keyCode===_.ESCAPE||"DOMAttrModified"===t.type)&&(s=c.find(":tabbable:first"),S((function(){l.find("[aria-expanded]."+o.settings.panelClass).off("DOMAttrModified.accessible-megamenu"),s.focus(),o.justFocused=!1}),99))}else{E(o.focusTimeoutID),c.siblings().find("[aria-expanded]").attr("aria-expanded","false").removeClass(r.openClass).filter("."+r.panelClass).attr("aria-hidden","true"),c.find("[aria-expanded]").attr("aria-expanded","true").addClass(r.openClass).filter("."+r.panelClass).attr("aria-hidden","false");var d=e("html")[0].scrollTop,f=e("."+r.panelClass+"."+r.openClass).parent().offset().top;d>f&&(e("html")[0].scrollTop=f),"mouseover"===t.type&&i.is(":tabbable")&&1===c.length&&0===u.length&&l.has(n.activeElement).length>0&&(i.focus(),o.justFocused=!1),b.call(o)}},o=function(t){var n=e(t.target).closest(":tabbable"),a=n.closest("."+this.settings.topNavItemClass),s=n.closest("."+this.settings.panelClass);1===a.length&&0===s.length&&1===a.find("."+this.settings.panelClass).length&&(n.hasClass(this.settings.openClass)?this.justFocused?(t.preventDefault(),t.stopPropagation(),this.justFocused=!1):($||!$&&!this.settings.openOnMouseover)&&(t.preventDefault(),t.stopPropagation(),i.call(this,t,n.hasClass(this.settings.openClass))):(t.preventDefault(),t.stopPropagation(),i.call(this,t),this.justFocused=!1))},r=function(){this.justMoved=!0},l=function(t){0===e(t.target).closest(this.menu).length&&(t.preventDefault(),t.stopPropagation(),i.call(this,t,!0))},c=function(t){"aria-expanded"===t.originalEvent.attrName&&"false"===t.originalEvent.newValue&&e(t.target).hasClass(this.settings.openClass)&&(t.preventDefault(),t.stopPropagation(),i.call(this,t,!0))},u=function(t){E(this.focusTimeoutID);var n=e(t.target),a=n.closest("."+this.settings.panelClass);n.addClass(this.settings.focusClass).on("click.accessible-megamenu",e.proxy(o,this)),this.justFocused=!this.mouseFocused||!this.settings.openOnMouseover&&this.mouseFocused,this.mouseFocused=!1,this.justFocused&&this.panels.not(a).filter("."+this.settings.openClass).length&&i.call(this,t)},d=function(n){this.justFocused=!1;var a=this,s=e(n.target),o=s.closest("."+this.settings.topNavItemClass);s.removeClass(this.settings.focusClass).off("click.accessible-megamenu"),t.cvox?a.focusTimeoutID=S((function(){t.cvox.Api.getCurrentNode((function(e){o.has(e).length?E(a.focusTimeoutID):a.focusTimeoutID=S((function(e,t,n){i.call(e,t,n)}),275,a,n,!0)}))}),25):a.focusTimeoutID=S((function(){a.mouseFocused&&null===n.relatedTarget||i.call(a,n,!0)}),300)},f=function(t){var n,s,r,l,c,u,d=this.constructor===M?this:a(this),f=d.settings,h=e(e(this).is("."+f.hoverClass+":tabbable")?this:t.target),p=d.menu,m=d.topnavitems,g=h.closest("."+f.topNavItemClass),b=p.find(":tabbable"),v=h.hasClass(f.panelClass)?h:h.closest("."+f.panelClass),C=v.find("."+f.panelGroupClass),x=h.closest("."+f.panelGroupClass),$=t.keyCode||t.which,w=!1,k=_.keyMap[t.keyCode]||"",D=1===g.length&&0===v.length;if(!h.is("input:focus, select:focus, textarea:focus, button:focus")){switch(h.is("."+f.hoverClass+":tabbable")&&e("html").off("keydown.accessible-megamenu"),$){case _.ESCAPE:this.mouseFocused=!1,i.call(d,t,!0);break;case _.DOWN:t.preventDefault(),this.mouseFocused=!1,D?(i.call(d,t),w=1===g.find("."+f.panelClass+" :tabbable:first").focus().length):w=1===b.filter(":gt("+b.index(h)+"):first").focus().length,!w&&T&&(t.ctrlKey||t.metaKey)&&(r=(b=e(":tabbable")).index(h),w=1===e(":tabbable:gt("+e(":tabbable").index(h)+"):first").focus().length);break;case _.UP:t.preventDefault(),this.mouseFocused=!1,D&&h.hasClass(f.openClass)?(i.call(d,t,!0),(n=m.filter(":lt("+m.index(g)+"):last")).children("."+f.panelClass).length&&(w=1===n.find("[aria-expanded]").attr("aria-expanded","true").addClass(f.openClass).filter("."+f.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):D||(w=1===b.filter(":lt("+b.index(h)+"):last").focus().length),!w&&T&&(t.ctrlKey||t.metaKey)&&(r=(b=e(":tabbable")).index(h),w=1===e(":tabbable:lt("+e(":tabbable").index(h)+"):first").focus().length);break;case _.RIGHT:t.preventDefault(),this.mouseFocused=!1,D?w=1===m.filter(":gt("+m.index(g)+"):first").find(":tabbable:first").focus().length:(C.length&&x.length&&(w=1===C.filter(":gt("+C.index(x)+"):first").find(":tabbable:first").focus().length),w||(w=1===g.find(":tabbable:first").focus().length));break;case _.LEFT:t.preventDefault(),this.mouseFocused=!1,D?w=1===m.filter(":lt("+m.index(g)+"):last").find(":tabbable:first").focus().length:(C.length&&x.length&&(w=1===C.filter(":lt("+C.index(x)+"):last").find(":tabbable:first").focus().length),w||(w=1===g.find(":tabbable:first").focus().length));break;case _.TAB:this.mouseFocused=!1,r=b.index(h),t.shiftKey&&D&&h.hasClass(f.openClass)?(i.call(d,t,!0),(n=m.filter(":lt("+m.index(g)+"):last")).children("."+f.panelClass).length&&(w=n.children().attr("aria-expanded","true").addClass(f.openClass).filter("."+f.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):t.shiftKey&&r>0?w=1===b.filter(":lt("+r+"):last").focus().length:!t.shiftKey&&r<b.length-1?w=1===b.filter(":gt("+r+"):first").focus().length:T&&(r=(b=e(":tabbable")).index(h),w=t.shiftKey?1===e(":tabbable:lt("+e(":tabbable").index(h)+"):last").focus().length:1===e(":tabbable:gt("+e(":tabbable").index(h)+"):first").focus().length),w&&t.preventDefault();break;case _.SPACE:case _.ENTER:if(!D)return!0;t.preventDefault(),o.call(d,t);break;default:if(E(this.keydownTimeoutID),0===(y+=k!==y?k:"").length)return;for(this.keydownTimeoutID=S((function(){y=""}),1e3),b=D&&!h.hasClass(f.openClass)?b.filter(":not(."+f.panelClass+" :tabbable)"):g.find(":tabbable"),t.shiftKey&&(b=e(b.get().reverse())),r=0;r<b.length;r++)if((l=b.eq(r)).is(h)){s=1===y.length?r+1:r;break}for(u=new RegExp("^"+y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i"),r=s;r<b.length;r++)if(l=b.eq(r),c=e.trim(l.text()),u.test(c)){w=!0,l.focus();break}if(!w)for(r=0;r<s;r++)if(l=b.eq(r),c=e.trim(l.text()),u.test(c)){l.focus();break}}d.justFocused=!1}},h=function(t){(e(t.target).closest(this.settings.panelClass)||e(t.target).closest(":focusable").length)&&(this.mouseFocused=!0,e(t.target).closest(this.settings.menuClass)&&e("html").on("keydown.accessible-megamenu",e.proxy(f,t.target))),E(this.mouseTimeoutID),this.mouseTimeoutID=S((function(){E(this.focusTimeoutID)}),1)},p=function(n){E(this.mouseTimeoutID);var a=this;if(e(t).width()>779){if(!a.settings.openOnMouseover)return;this.mouseTimeoutID=S((function(){e(n.target).addClass(a.settings.hoverClass),i.call(a,n),e(n.target).closest(a.settings.menuClass)&&e("html").on("keydown.accessible-megamenu",e.proxy(f,n.target))}),this.settings.openDelay)}},m=function(n){E(this.mouseTimeoutID);var a=this;if(e(t).width()>779){if(!a.settings.openOnMouseover)return;e(n.target).removeClass(a.settings.hoverClass),a.mouseTimeoutID=S((function(){i.call(a,n,!0)}),this.settings.closeDelay),e(n.target).is(":tabbable")&&e("html").off("keydown.accessible-megamenu")}},g=function(){var e="true"===this.toggleButton.attr("aria-expanded");this.toggleButton.attr({"aria-expanded":!e,"aria-pressed":!e})},b=function(t){var n=this.menu;t?(e("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu"),n.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu")):(e("html").on("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",e.proxy(l,this)),n.find("[aria-expanded=true]."+this.settings.panelClass).on("DOMAttrModified.accessible-megamenu",e.proxy(c,this)))},v=function(){var t=this.menu,a=this.toggleButton;t.on("focusin.accessible-megamenu",":focusable, ."+this.settings.panelClass,e.proxy(u,this)).on("focusout.accessible-megamenu",":focusable, ."+this.settings.panelClass,e.proxy(d,this)).on("keydown.accessible-megamenu",e.proxy(f,this)).on("mouseover.accessible-megamenu",e.proxy(p,this)).on("mouseout.accessible-megamenu",e.proxy(m,this)).on("mousedown.accessible-megamenu",e.proxy(h,this)).on("click.accessible-megamenu",e.proxy(o,this)),a.on("click.accessible-megamenu",e.proxy(g,this)),$&&t.on("touchmove.accessible-megamenu",e.proxy(r,this)),e(n.activeElement).closest(t).length&&e(n.activeElement).trigger("focusin.accessible-megamenu")},C=function(){var e=this.menu,t=this.toggleButton;e.off(".accessible-megamenu"),e.find("[aria-expanded=true]."+this.settings.panelClass).length&&b.call(this,!0),t.off(".accessible-megamenu")},{constructor:M,init:function(){var t=this.settings,n=e(this.element),a=n.children("ol,ul").first(),s=a.children(),i=n.children("button").first();this.start(t,n,a,s,i)},start:function(t,n,a,i,o){var r=this;this.settings=t,this.menu=a,this.topnavitems=i,this.toggleButton=o,n.attr("role","navigation"),s.call(r,a),a.addClass(t.menuClass),a.addClass(["js",t.menuClass].join("-")),i.each((function(n,a){var i,o;(a=e(a)).addClass(t.topNavItemClass),i=a.find(":tabbable:first"),o=a.children(":not(:tabbable):last"),s.call(r,i),o.length&&(s.call(r,o),i.attr({role:"button","aria-controls":o.attr("id"),"aria-expanded":!1,tabindex:0}),o.attr({role:"region","aria-expanded":!1,"aria-hidden":!0}).addClass(t.panelClass).not("[aria-labelledby]").attr("aria-labelledby",i.attr("id")))})),this.panels=a.find("."+t.panelClass),a.find("hr").attr("role","separator"),o.addClass(t.toggleButtonClass),o.attr({"aria-expanded":!1,"aria-pressed":!1,"aria-controls":a.attr("id")}),v.call(this)},destroy:function(){this.menu.removeClass(["js",this.settings.menuClass].join("-")),C.call(this,!0)},getDefaults:function(){return this._defaults},getOption:function(e){return this.settings[e]},getAllOptions:function(){return this.settings},setOption:function(e,t,n){this.settings[e]=t,n&&this.init()}}),e.fn[w]=function(t){return this.each((function(){var n=e.data(this,"plugin_"+w);n?"function"==typeof n[t]&&n[t].apply(n,Array.prototype.slice.call(arguments,1)):e.data(this,"plugin_"+w,new e.fn[w].AccessibleMegaMenu(this,t))}))},e.fn[w].AccessibleMegaMenu=M,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,a){return!!e.data(t,a[3])},focusable:function(t){return A(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),a=isNaN(n);return(a||n>=0)&&A(t,!a)}})}(jQuery,window,document)},271:function(){$.fn.extend({leanModal:function(e){return e=$.extend({closeButton:".modal_close, .externalURL, .content-modal"},e),this.each((function(){var t,n=e,a=!1;$(this).on("click",(function(e){function s(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}var i=s()&&s()<=9,o=$(this).attr("href");function r(e){if(a&&(!e.keyCode||27===e.keyCode)){i?($(o).removeClass("open").attr("aria-hidden","true"),"#signInHelp"===o&&$("#signInHelp iframe").removeAttr("src style")):($(o).addClass("animateOut"),setTimeout((function(){$(o).removeClass("animateOut open").attr("aria-hidden","true"),"#signInHelp"===o&&$("#signInHelp iframe").removeAttr("src style")}),1e3)),a=!1,t.focus();var n=$.Event("modalclose");$(window).trigger(n)}}t=document.activeElement,$(o).addClass("open").focus().attr("aria-hidden","false"),a=!0,$(".content-modal > section").on("click",(function(e){e.stopPropagation()})),$(n.closeButton).on("click",r),$(document).keyup(r),e.preventDefault(),$(o).keydown((function(e){var t,n,a,s,i,o;t=$(this),9===(n=e).which&&(a=t.find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),s=jQuery(":focus"),i=a.length,o=a.index(s),n.shiftKey?0===o&&(a.get(i-1).focus(),n.preventDefault()):o===i-1&&(a.get(0).focus(),n.preventDefault()))}))}))}))}})},738:function(e){!function(t,n,a,s){var i=[],o={_version:"3.12.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){i.push({name:e,fn:t,options:n})},addAsyncTest:function(e){i.push({name:null,fn:e})}},r=function(){};r.prototype=o,r=new r;var l=[];function c(e,t){return typeof e===t}var u=a.documentElement,d="svg"===u.nodeName.toLowerCase();d||function(t,n){var a,s,i=t.html5||{},o=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,r=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,l="_html5shiv",c=0,u={};function d(){var e=m.elements;return"string"==typeof e?e.split(" "):e}function f(e){var t=u[e[l]];return t||(t={},c++,e[l]=c,u[c]=t),t}function h(e,t,a){return t||(t=n),s?t.createElement(e):(a||(a=f(t)),!(i=a.cache[e]?a.cache[e].cloneNode():r.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e)).canHaveChildren||o.test(e)||i.tagUrn?i:a.frag.appendChild(i));var i}function p(e){e||(e=n);var t=f(e);return!m.shivCSS||a||t.hasCSS||(t.hasCSS=!!function(e,t){var n=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",a.insertBefore(n.lastChild,a.firstChild)}(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),s||function(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return m.shivMethods?h(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-:]+/g,(function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'}))+");return n}")(m,t.frag)}(e,t),e}!function(){try{var e=n.createElement("a");e.innerHTML="<xyz></xyz>",a="hidden"in e,s=1==e.childNodes.length||function(){n.createElement("a");var e=n.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){a=!0,s=!0}}();var m={elements:i.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3",shivCSS:!1!==i.shivCSS,supportsUnknownElements:s,shivMethods:!1!==i.shivMethods,type:"default",shivDocument:p,createElement:h,createDocumentFragment:function(e,t){if(e||(e=n),s)return e.createDocumentFragment();for(var a=(t=t||f(e)).frag.cloneNode(),i=0,o=d(),r=o.length;i<r;i++)a.createElement(o[i]);return a},addElements:function(e,t){var n=m.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),m.elements=n+" "+e,p(t)}};t.html5=m,p(n),e.exports&&(e.exports=m)}(void 0!==n?n:this,a);var f="Moz O ms Webkit",h=o._config.usePrefixes?f.split(" "):[];function p(){return"function"!=typeof a.createElement?a.createElement(arguments[0]):d?a.createElementNS.call(a,"http://www.w3.org/2000/svg",arguments[0]):a.createElement.apply(a,arguments)}o._cssomPrefixes=h;var m={elem:p("modernizr")};r._q.push((function(){delete m.elem}));var g={style:m.elem.style};function b(e,t,n,s){var i,o,r,l,c="modernizr",f=p("div"),h=function(){var e=a.body;return e||((e=p(d?"svg":"body")).fake=!0),e}();if(parseInt(n,10))for(;n--;)(r=p("div")).id=s?s[n]:c+(n+1),f.appendChild(r);return(i=p("style")).type="text/css",i.id="s"+c,(h.fake?h:f).appendChild(i),h.appendChild(f),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(a.createTextNode(e)),f.id=c,h.fake&&(h.style.background="",h.style.overflow="hidden",l=u.style.overflow,u.style.overflow="hidden",u.appendChild(h)),o=t(f,e),h.fake&&h.parentNode?(h.parentNode.removeChild(h),u.style.overflow=l,u.offsetHeight):f.parentNode.removeChild(f),!!o}function v(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function C(e,t){var a=e.length;if("CSS"in n&&"supports"in n.CSS){for(;a--;)if(n.CSS.supports(v(e[a]),t))return!0;return!1}if("CSSSupportsRule"in n){for(var i=[];a--;)i.push("("+v(e[a])+":"+t+")");return b("@supports ("+(i=i.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===function(e,t,a){var s;if("getComputedStyle"in n){s=getComputedStyle.call(n,e,t);var i=n.console;null!==s?a&&(s=s.getPropertyValue(a)):i&&i[i.error?"error":"log"].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else s=!t&&e.currentStyle&&e.currentStyle[a];return s}(e,null,"position")}))}return s}function x(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}r._q.unshift((function(){delete g.style}));var y=o._config.usePrefixes?f.toLowerCase().split(" "):[];function $(e,t){return function(){return e.apply(t,arguments)}}function w(e,t,n,a,i){var o=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+h.join(o+" ")+o).split(" ");return c(t,"string")||c(t,"undefined")?function(e,t,n,a){if(a=!c(a,"undefined")&&a,!c(n,"undefined")){var i=C(e,n);if(!c(i,"undefined"))return i}for(var o,r,l,u,d,f=["modernizr","tspan","samp"];!g.style&&f.length;)o=!0,g.modElem=p(f.shift()),g.style=g.modElem.style;function h(){o&&(delete g.style,delete g.modElem)}for(l=e.length,r=0;r<l;r++)if(u=e[r],d=g.style[u],~(""+u).indexOf("-")&&(u=x(u)),g.style[u]!==s){if(a||c(n,"undefined"))return h(),"pfx"!==t||u;try{g.style[u]=n}catch(e){}if(g.style[u]!==d)return h(),"pfx"!==t||u}return h(),!1}(r,t,a,i):function(e,t,n){var a;for(var s in e)if(e[s]in t)return!1===n?e[s]:c(a=t[e[s]],"function")?$(a,n||t):a;return!1}(r=(e+" "+y.join(o+" ")+o).split(" "),t,n)}o._domPrefixes=y,o.testAllProps=w;var k=function(e){var t,a=prefixes.length,i=n.CSSRule;if(void 0===i)return s;if(!e)return!1;if((t=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in i)return"@"+e;for(var o=0;o<a;o++){var r=prefixes[o];if(r.toUpperCase()+"_"+t in i)return"@-"+r.toLowerCase()+"-"+e}return!1};o.atRule=k;var _=o.prefixed=function(e,t,n){return 0===e.indexOf("@")?k(e):(-1!==e.indexOf("-")&&(e=x(e)),t?w(e,t,n):w(e,"pfx"))};function E(e,t,n){return w(e,s,s,t,n)}r.addTest("objectfit",!!_("objectFit"),{aliases:["object-fit"]}),o.testAllProps=E,r.addTest("flexbox",E("flexBasis","1px",!0)),function(){var e,t,n,a,s,o;for(var u in i)if(i.hasOwnProperty(u)){if(e=[],(t=i[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=c(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)1===(o=e[s].split(".")).length?r[o[0]]=a:(r[o[0]]&&(!r[o[0]]||r[o[0]]instanceof Boolean)||(r[o[0]]=new Boolean(r[o[0]])),r[o[0]][o[1]]=a),l.push((a?"":"no-")+o.join("-"))}}(),function(e){var t=u.className,n=r._config.classPrefix||"";if(d&&(t=t.baseVal),r._config.enableJSClass){var a=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}r._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),d?u.className.baseVal=t:u.className=t)}(l),delete o.addTest,delete o.addAsyncTest;for(var S=0;S<r._q.length;S++)r._q[S]();t.Modernizr=r}(window,window,document)}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=function(t,n,s,i){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],i=e[u][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,s,i]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={490:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,o=n[0],r=n[1],l=n[2],c=0;for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var u=l(a);for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[o[c]]=0;return a.O(u)},n=self.webpackChunkaem_nffg_ui_frontend=self.webpackChunkaem_nffg_ui_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var s=a.O(void 0,[285],(function(){return a(556)}));s=a.O(s)}();